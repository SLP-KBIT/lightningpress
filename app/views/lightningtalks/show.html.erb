<h1>LT 詳細</h1>

<hr>

<div class="row">
  <div class="col-md-4">
    <table class="table table-hover table-condensed table-bordered">
      <tr>
        <th>タイトル</th>
        <td><%= @lightningtalk.name %></td>
      </tr>
      <tr>
        <th>プレゼンター</th>
        <td><%= @lightningtalk.member.account %></td>
      </tr>
      <tr>
        <th>日付</th>
        <td><%= @lightningtalk.performance_date.to_s(:date) %></td>
      </tr>
      <tr>
        <th>資料</th>
        <td><%= @lightningtalk.content_path.blank? ? "資料はまだない" : link_to("ダウンロード", :action => :archive) %></td>
      </tr>
    </table>
    <% if @current_member.id == @lightningtalk.member.id then %>
      <%= content_tag :button, "編集",
	                  href: "#editLightningtalkModal#{@lightningtalk.id}",
                    class: "btn btn-primary btn-sm",
                    data: {toggle: "modal"} %>

      <%= render 'edit_form', lightningtalk: @lightningtalk %>
    <% end %>
  </div>
</div>

<hr>

<h3>コメント一覧</h3>

<%= content_tag :button, "コメントする",
                href: "#ltCommentModal",
                class: "btn btn-sm btn-primary",
                data: {toggle: "modal"} %>
<%= render 'lt_comments/form', { comment: @lightningtalk.lt_comments.build } %>

<br>

<% if @lightningtalk.lt_comments.empty? %>
  <p>コメントはありません</p>
<% else %>
  <% @lightningtalk.lt_comments.order("created_at DESC").each do |lt_comment| %>
    <div class="panel panel-default" style="margin: 5px; width: 250px;">
      <div class="panel-heading">
        <font color="gray"><%= lt_comment.created_at.strftime("%Y/%m/%d %H:%M") %></font> by <strong><%= lt_comment.member.account %></strong>
      </div>
      <div class="panel-body">
        <%= lt_comment.content %>
      </div>
    </div>
  <% end %>
<% end %>
